# Getting Started

The btptf CLI offers two ways to export BTP resources:

- Exporting resources via JSON (recommended)
- Exporting resources

Let's look at how both flows work for a simple subaccount export.

## Option 1: Basic Flow to Export a Subaccount via JSON (Recommended)
This is a two-step process where a JSON is created as a resource inventory and used as a basis for the export.

1. Create a JSON file with a list of BTP resources to be exported.

    ```bash
    btptf create-json - s <subaccount id>
    ```
Review and adjust the JSON file according to your needs.

2. Export resources from SAP BTP via a JSON file.

    ```bash
    btptf export-by-json -p <path to json file>
    ```

## Option 2: Basic Flow to Export a Subaccount Directly

Export resources from SAP BTP directly, by specifying their IDs.

    ```bash
    btptf export -s <subaccount id>
    ```

You find a comprehensive overview of the commands and their options and flags in the [documentation](btptf.md).

## Option 1: Detailed Example of Exporting a Subaccount via JSON

The below example looks in more detail at how to use the btptf CLI to export an existing subaccount as  Terraform configuration and state.

1. Launch SAP BTP Cockpit and navigate to an existing subaccount.

2. In the subaccount, navigate to the 'Overview' tab and find the 'Subaccount ID'

3. Open a terminal session.

4. Generate the json file which contains the list of resources to be exported. This json file can be generated by running the btptf CLI command btptf create-json - s <subaccount id>

    ```bash
    btptf create-json - s 9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1
    ```
The resources list file with the name btpResources_<subaccount id>.json e.g, `btpResources_9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1.json` gets generated.

![Console output of create json command of btptf CLI](img/create-json.jpg)

5. Edit the json file and remove the resources which need not be exported and managed by Terraform.

6. Run the btptf CLI command to export Terraform configuration using the json file. btptf export-by-json -p btpResources_<subaccount id>.json -s <subaccount id>

    ```bash
    btptf export-by-json -p btpResources_9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1.json -s 9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1
    ```

7. The Terraform configurations will be generated under the folder `generated_configurations_9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1`. The output of the command will show an export summary which contains the information about which 'Resource Names' and their respective count.

![Display of generated configuration after export](img/generated-config.jpg)

8. Review the readme file NextSteps.md under the folder `generated_configurations_9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1` and adapt the Terraform configuration files as mentioned in the NextSteps.md

9. In the terminal, navigate to the folder `generated_configurations_9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1` and run the Terraform plan command.
This will show a plan of how many resources will be imported, added, changed and destroyed.

![Console output of Terraform plan after import](img/tf-plan.jpg)

10. Run the command Terraform apply. This will import the Terraform state and store it in the terraform.state file in under the folder `generated_configurations_9d3471e7-a6b3-48e2-ae4b-b9426bb24cd1`.

![Console output of Terraform apply after import](img/tf-apply.jpg)

11.  Now, to modify your BTP resources in this subaccount you can change to Terraform configuration files and run a Terraform apply.
